<!DOCTYPE html>
<html>
<head>
  <title>Customer Profile Dashboard</title>

<style>
body {
  margin: 0;
  font-family: Poppins, sans-serif;
  background: #f4f4f4;
}

.container {
  display: flex;
}

.sidebar {
  width: 230px;
  background: #222;
  color: white;
  height: 100vh;
  padding-top: 30px;
  position: sticky;
  top: 0;
}

.sidebar h2 {
  text-align: center;
  margin-bottom: 30px;
}

.sidebar a {
  display: block;
  padding: 15px;
  color: white;
  text-decoration: none;
  border-bottom: 1px solid #333;
}

.sidebar a:hover {
  background: #e91e63;
}

.content {
  flex: 1;
  padding: 40px;
}

.profile-card {
  background: white;
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  display: flex;
  gap: 20px;
}

.profile-card img {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #e91e63;
  cursor: pointer;
}

.summary {
  display: flex;
  gap: 20px;
  margin-top: 30px;
}

.box {
  flex: 1;
  background: white;
  padding: 25px;
  text-align: center;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.box h3 {
  margin-bottom: 5px;
  color: #e91e63;
  font-size: 22px;
}

button {
  padding: 10px 20px;
  background: #e91e63;
  border: none;
  color: white;
  margin-top: 20px;
  border-radius: 8px;
  cursor: pointer;
}

button:hover {
  opacity: 0.9;
}
</style>
</head>

<body>

<div class="container">

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>My Account</h2>
    <a href="#">Profile</a>
    <a href="#">My Orders</a>
    <a href="wishlist.html">Wishlist</a>
    <a href="#">Cart</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>

  <!-- Content -->
  <div class="content">

    <!-- Profile Card -->
    <div class="profile-card">
      <div>
        <img src="default.png" id="ppic" onclick="uploadPic()">
        <input type="file" id="file" style="display:none" onchange="setPic(event)">
      </div>

      <div class="profile-details">
        <h2 id="pname">Customer Name</h2>

        <p><b>Email:</b> <span id="pemail"></span></p>
        <p><b>Mobile:</b> <span id="pmobile"></span></p>
        <p><b>DOB:</b> <span id="pdob"></span></p>
        <p><b>Gender:</b> <span id="pgender"></span></p>

        <p><b>Address:</b>
          <span id="paddress"></span>,
          <span id="pcity"></span>,
          <span id="pstate"></span>,
          <span id="ppincode"></span>
        </p>

        <button onclick="editProfile()">Edit Profile</button>
      </div>
    </div>

    <!-- Summary Boxes -->
    <div class="summary">
      <div class="box">
        <h3 id="orderCount">0</h3>
        <p>Total Orders</p>
      </div>
      <div class="box">
        <h3 id="wishlistCount">0</h3>
        <p>Wishlist Items</p>
      </div>
      <div class="box">
        <h3 id="cartCount">0</h3>
        <p>Cart Items</p>
      </div>
    </div>

  </div>
</div>

<script>
function loadProfile() {
  document.getElementById("pname").innerText = localStorage.getItem("name") || "Customer";
  document.getElementById("pemail").innerText = localStorage.getItem("email") || "not added";
  document.getElementById("pmobile").innerText = localStorage.getItem("mobile") || "not added";

  document.getElementById("pdob").innerText = localStorage.getItem("dob") || "not added";
  document.getElementById("pgender").innerText = localStorage.getItem("gender") || "not added";

  document.getElementById("paddress").innerText = localStorage.getItem("address") || "not added";
  document.getElementById("pcity").innerText = localStorage.getItem("city") || "";
  document.getElementById("pstate").innerText = localStorage.getItem("state") || "";
  document.getElementById("ppincode").innerText = localStorage.getItem("pincode") || "";

  let pic = localStorage.getItem("pic");
  if (pic) document.getElementById("ppic").src = pic;

  document.getElementById("wishlistCount").innerText =
    (JSON.parse(localStorage.getItem("wishlist")) || []).length;

  document.getElementById("cartCount").innerText =
    (JSON.parse(localStorage.getItem("cart")) || []).length;

  document.getElementById("orderCount").innerText =
    (JSON.parse(localStorage.getItem("orders")) || []).length;
}

function editProfile() {
  let n = prompt("Enter Name:", localStorage.getItem("name"));
  let m = prompt("Enter Mobile:", localStorage.getItem("mobile"));
  let dob = prompt("Enter DOB (DD-MM-YYYY):", localStorage.getItem("dob"));
  let gender = prompt("Enter Gender (Male/Female/Other):", localStorage.getItem("gender"));

  let a = prompt("Enter Address:", localStorage.getItem("address"));
  let city = prompt("Enter City:", localStorage.getItem("city"));
  let state = prompt("Enter State:", localStorage.getItem("state"));
  let pincode = prompt("Enter Pincode:", localStorage.getItem("pincode"));

  if (n) localStorage.setItem("name", n);
  if (m) localStorage.setItem("mobile", m);
  if (dob) localStorage.setItem("dob", dob);
  if (gender) localStorage.setItem("gender", gender);

  if (a) localStorage.setItem("address", a);
  if (city) localStorage.setItem("city", city);
  if (state) localStorage.setItem("state", state);
  if (pincode) localStorage.setItem("pincode", pincode);

  loadProfile();
}

function uploadPic() {
  document.getElementById("file").click();
}

function setPic(event) {
  let read = new FileReader();
  read.onload = function () {
    document.getElementById("ppic").src = read.result;
    localStorage.setItem("pic", read.result);
  };
  read.readAsDataURL(event.target.files[0]);
}

function logout() {
  alert("Logged Out");
  window.location.href = "login.html";
}

loadProfile();
</script>

</body>
</html>
